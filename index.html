<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tour Covilhã</title>

<link rel="manifest" href="manifest.json">

<script>
if ('serviceWorker' in navigator) {
navigator.serviceWorker.register('service-worker.js');
}
</script>

<style>
body{font-family:Arial;text-align:center;padding:20px;}
img{width:95%;margin-top:10px;border-radius:12px;}
</style>
</head>

<body>

<h2>Tour Interativo Covilhã</h2>

<button onclick="iniciar()" style="font-size:22px;padding:15px 30px">
INICIAR TOUR
</button>

<div id="info" style="margin-top:20px"></div>

<script>

const pontos = [

{
nome:"Rotunda do Rato",
lat:40.2808,
lng:-7.5043,
descricao:"Importante ponto de circulação urbana e acesso central à cidade da Covilhã.",
info:"Paragem recomendada: 5 minutos",
fotos:["imagens/rato1.jpg","imagens/rato2.jpg","imagens/rato3.jpg"]
},

{
nome:"Museu do Lanifício",
lat:40.2832,
lng:-7.5030,
descricao:"Museu dedicado à história industrial dos lanifícios, elemento fundamental da identidade da Covilhã.",
info:"Paragem recomendada: 20 minutos",
fotos:["imagens/lanificio1.jpg","imagens/lanificio2.jpg","imagens/lanificio3.jpg"]
},

{
nome:"Câmara Municipal da Covilhã",
lat:40.2816,
lng:-7.5018,
descricao:"Edifício histórico localizado no centro administrativo e cultural da cidade.",
info:"Paragem recomendada: 10 minutos",
fotos:["imagens/camara1.jpg","imagens/camara2.jpg","imagens/camara3.jpg"]
},

{
nome:"Castelo da Covilhã",
lat:40.2825,
lng:-7.5039,
descricao:"Local histórico que remonta à época medieval e oferece vista panorâmica da cidade.",
info:"Paragem recomendada: 15 minutos",
fotos:["imagens/castelo1.jpg","imagens/castelo2.jpg","imagens/castelo3.jpg"]
},

{
nome:"Parque de Campismo do Pião",
lat:40.2650,
lng:-7.5280,
descricao:"Área natural de lazer localizada na Serra da Estrela, ideal para atividades ao ar livre.",
info:"Paragem recomendada: 20 minutos",
fotos:["imagens/piao1.jpg","imagens/piao2.jpg","imagens/piao3.jpg"]
}

];

function distanciaMetros(lat1, lon1, lat2, lon2) {
const R = 6371000;
const φ1 = lat1 * Math.PI/180;
const φ2 = lat2 * Math.PI/180;
const Δφ = (lat2-lat1) * Math.PI/180;
const Δλ = (lon2-lon1) * Math.PI/180;

const a = Math.sin(Δφ/2)*Math.sin(Δφ/2) +
Math.cos(φ1)*Math.cos(φ2) *
Math.sin(Δλ/2)*Math.sin(Δλ/2);

const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
return R * c;
}

function iniciar(){

document.getElementById("info").innerHTML="Tour iniciado...";

navigator.geolocation.watchPosition(function(pos){

const lat = pos.coords.latitude;
const lng = pos.coords.longitude;

pontos.forEach(p=>{

let d = distanciaMetros(lat,lng,p.lat,p.lng);

if(d < 200){

let galeria="";
p.fotos.forEach(f=>{
galeria += "<img src='"+f+"'>";
});

document.getElementById("info").innerHTML =
"<h2>"+p.nome+"</h2>" +
"<p>"+p.descricao+"</p>" +
"<p><b>"+p.info+"</b></p>" +
galeria;

}

});

});

}

</script>

</body>
</html>
