<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tour Interativo Covilh√£ e Serra</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>

<style>
body{margin:0;font-family:Arial;background:#f4f4f4;text-align:center;}
#map{height:40vh;width:100%;}
button{padding:15px 30px;margin:10px;font-size:18px;}
#info{background:white;padding:15px;margin:10px;border-radius:8px;}
#debug{background:#222;color:#0f0;padding:10px;font-size:12px;text-align:left;}
img{max-width:100%;border-radius:8px;margin-top:10px;}
</style>
</head>

<body>

<h2>Tour Interativo Covilh√£ e Serra</h2>

<button onclick="iniciar()">INICIAR TOUR</button>

<div id="info"></div>
<div id="map"></div>
<div id="debug"></div>


<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>

let map=L.map('map').setView([40.28,-7.50],13);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
maxZoom:19
}).addTo(map);

let marcadorUsuario=null;
let ultimoPonto=null;

const pontos=[

{
nome:"Central de Camionagem",
lat:40.2735,
lng:-7.4983,
raio:120,
texto:`Principal terminal rodovi√°rio da Covilh√£.

üìç Inaugurada para melhorar a mobilidade regional, liga a cidade a v√°rios destinos nacionais.

üöå Dica: bom ponto para iniciar o tour pela proximidade ao centro.`,
img:["images/camionagem1.png"]
},

{
nome:"Serra Shopping",
lat:40.2710,
lng:-7.5023,
raio:120,
texto:`O maior centro comercial da Covilh√£.

üõçÔ∏è Aqui encontra lojas, restaura√ß√£o e cinema.

üìç Ponto de refer√™ncia moderno da cidade.`,
img:["images/shopping1.jpg"]
},

{
nome:"Hotel Santa Euf√©mia",
lat:40.2734,
lng:-7.5031,
raio:120,
texto:`Hotel tradicional muito procurado por visitantes da Serra da Estrela.

üè® Boa localiza√ß√£o para explorar a cidade.`,
img:["images/hotel1.jpg"]
},

{
nome:"Rotunda do Rato",
lat:40.2771,
lng:-7.5105,
raio:100,
texto:`Importante n√≥ de circula√ß√£o urbana da Covilh√£.

üöó Liga v√°rias zonas centrais da cidade.`,
img:["images/rato1.jpg"]
},

{
nome:"Museu do Lanif√≠cio",
lat:40.2779,
lng:-7.5085,
raio:100,
texto:`Museu dedicado √† forte tradi√ß√£o t√™xtil da Covilh√£.

üß∂ A cidade foi um dos maiores centros lanif√≠cios de Portugal.`,
img:["images/lanificio1.jpg"]
},

{
nome:"Igreja N. Senhora de F√°tima",
lat:40.277692,
lng:-7.509809,
raio:100,
texto:`Igreja moderna muito frequentada pela comunidade local.

‚õ™ Espa√ßo de culto e refer√™ncia religiosa.`,
img:["images/fatima1.jpg"]
},

{
nome:"Igreja Santa Maria Maior",
lat:40.280208,
lng:-7.506062,
raio:100,
texto:`Igreja Matriz da Covilh√£, edificada no s√©culo XIX.

üé® Destaca-se o revestimento azulejar com cenas da vida da Virgem.`,
img:["images/santa-maria.jpg"]
},

{
nome:"C√¢mara Municipal",
lat:40.2805,
lng:-7.5044,
raio:100,
texto:`Edif√≠cio dos Pa√ßos do Concelho da Covilh√£.

üèõÔ∏è Centro administrativo e pol√≠tico do munic√≠pio.`,
img:["images/camara1.jpg"]
},

{
nome:"Castelo da Covilh√£",
lat:40.2817,
lng:-7.5086,
raio:120,
texto:`Antiga fortifica√ß√£o medieval que protegia a vila.

üõ°Ô∏è Hoje restam vest√≠gios hist√≥ricos importantes.`,
img:["images/castelo1.jpg"]
},

{
nome:"Parque do Pi√£o",
lat:40.2872,
lng:-7.5271,
raio:200,
texto:`Zona verde de lazer muito apreciada pelos habitantes.

üå≥ Ideal para pequenas paragens e contacto com a natureza.`,
img:["images/piao1.jpg"]
},

// ===== SERRA =====

{
nome:"Penhas da Sa√∫de",
lat:40.3076,
lng:-7.5486,
raio:700,
texto:`Importante est√¢ncia tur√≠stica de montanha.

üèîÔ∏è Muito procurada no inverno e ver√£o.`,
img:["images/penhas1.jpg"]
},

{
nome:"Edif√≠cio Telef√©rico Piornos",
lat:40.314362,
lng:-7.575729,
raio:700,
texto:`Zona de acesso hist√≥rico √†s √°reas altas da serra.

üö† Ponto associado √†s infraestruturas de montanha.`,
img:["images/teleferico1.jpg"]
},

{
nome:"Nossa Senhora da Boa Estrela",
lat:40.322991,
lng:-7.602988,
raio:700,
texto:`Imagem de Nossa Senhora esculpida na rocha.

üôè Um dos pontos mais emblem√°ticos da Serra da Estrela.`,
img:["images/boaestrela1.jpg"]
},

{
nome:"Lagoa do Viriato",
lat:40.322991,
lng:-7.602988,
raio:700,
texto:`Zona natural de grande beleza paisag√≠stica.

üåÑ Frequentemente visitada por turistas.`,
img:["images/viriato1.jpg"]
},

{
nome:"Vale do Z√™zere",
lat:40.3280,
lng:-7.5867,
raio:700,
texto:`Impressionante vale glaciar da Serra da Estrela.

üßä Formado durante a √∫ltima era do gelo.`,
img:["images/zezere1.jpg"]
},

{
nome:"Miradouro Vale de Loriga",
lat:40.334209,
lng:-7.617628,
raio:700,
texto:`Miradouro com vista panor√¢mica sobre o vale glaciar.

üì∏ Paragem obrigat√≥ria para fotografias.`,
img:["images/loriga1.jpg"]
},

{
nome:"Est√¢ncia de Ski",
lat:40.330836,
lng:-7.613945,
raio:700,
texto:`Principal est√¢ncia de desportos de inverno em Portugal.

üéø Muito procurada na √©poca de neve.`,
img:["images/ski1.jpg"]
},

{
nome:"Torre Serra da Estrela",
lat:40.3219,
lng:-7.6127,
raio:700,
texto:`Ponto mais alto de Portugal continental (1993 m).

üìç Local ic√≥nico da Serra da Estrela.`,
img:["images/torre1.jpg"]
},

{
nome:"Cascata Po√ßo do Inferno",
lat:40.372757,
lng:-7.516673,
raio:700,
texto:`Uma das cascatas naturais mais bonitas da regi√£o.

üíß Muito visitada por amantes da natureza.`,
img:["images/pocoinferno1.jpg"]
}

];
pontos.forEach(p=>{
L.marker([p.lat,p.lng]).addTo(map).bindPopup(p.nome);
});

function iniciar(){

if(navigator.geolocation){

navigator.geolocation.watchPosition(
atualizar,
erro,
{enableHighAccuracy:true,maximumAge:0,timeout:15000}
);

}else{
alert("GPS n√£o suportado");
}

}

function atualizar(pos){

let lat=pos.coords.latitude;
let lng=pos.coords.longitude;
let precisao=pos.coords.accuracy;

if(!marcadorUsuario){
marcadorUsuario=L.marker([lat,lng]).addTo(map);
}else{
marcadorUsuario.setLatLng([lat,lng]);
}

map.setView([lat,lng]);

let maisProximo=null;
let menorDist=999999;

pontos.forEach(p=>{
let d=dist(lat,lng,p.lat,p.lng);
if(d<p.raio && d<menorDist){
maisProximo=p;
menorDist=d;
}
});

if(maisProximo && maisProximo.nome!==ultimoPonto){

ultimoPonto=maisProximo.nome;

let html="<h3>"+maisProximo.nome+"</h3>";

if(maisProximo.texto){
html+="<p>"+maisProximo.texto+"</p>";
}

if(maisProximo.img){
maisProximo.img.forEach(f=>{
html+='<img src="'+f+'">';
});
}

document.getElementById("info").innerHTML=html;


}

document.getElementById("debug").innerHTML=
"Lat: "+lat+"<br>"+
"Lng: "+lng+"<br>"+
"Precis√£o: "+Math.round(precisao)+"m<br>"+
"Ponto ativo: "+(ultimoPonto?ultimoPonto:"Nenhum")+"<br>"+
"Dist√¢ncia atual: "+Math.round(menorDist)+"m";

}

function erro(){
document.getElementById("debug").innerHTML="Erro ao obter GPS";
}

function dist(lat1,lon1,lat2,lon2){
const R=6371000;
const dLat=(lat2-lat1)*Math.PI/180;
const dLon=(lon2-lon1)*Math.PI/180;
const a=
Math.sin(dLat/2)*Math.sin(dLat/2)+
Math.cos(lat1*Math.PI/180)*
Math.cos(lat2*Math.PI/180)*
Math.sin(dLon/2)*Math.sin(dLon/2);
const c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));
return R*c;
}

</script>

</body>
</html>







