<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Tour Interativo Covilhã e Serra</title>

<style>
body{font-family:Arial;text-align:center;margin:20px;}
button{padding:15px 30px;font-size:18px;}
img{width:90%;max-width:500px;margin:10px 0;}
</style>
</head>

<body>

<h1>Tour Interativo Covilhã e Serra</h1>
<button onclick="iniciar()">INICIAR TOUR</button>

<p id="status"></p>
<h2 id="nome"></h2>
<p id="texto"></p>
<div id="imgs"></div>

<script>

let pontoAtual = -1;

const pontos=[

{nome:"Central de Camionagem",lat:40.2737,lng:-7.4986,raio:250,texto:"Principal terminal rodoviário da cidade.",img:["images/camionagem1.jpg"]},
{nome:"Serra Shopping",lat:40.2706,lng:-7.5017,raio:250,texto:"Maior centro comercial da Covilhã.",img:["images/shopping1.jpg"]},
{nome:"Hotel Santa Eufémia",lat:40.2735,lng:-7.5030,raio:250,texto:"Hotel tradicional da cidade.",img:["images/hotel1.jpg"]},
{nome:"Igreja Nossa Senhora de Fátima",lat:40.277781,lng:-7.509640,raio:200,texto:"Importante igreja da cidade.",img:["images/fatima1.jpg"]},
{nome:"Rotunda do Rato",lat:40.277080,lng:-7.510327,raio:200,texto:"Importante ponto de circulação urbana.",img:["images/rato1.jpg"]},
{nome:"Museu do Lanifício",lat:40.277890,lng:-7.508553,raio:200,texto:"Museu histórico da indústria têxtil.",img:["images/lanificio1.jpg"]},
{nome:"Igreja Santa Maria Maior",lat:40.280150,lng:-7.505885,raio:200,texto:"Principal igreja histórica da Covilhã.",img:["images/maria1.jpg"]},
{nome:"Câmara Municipal",lat:40.2805,lng:-7.5042,raio:200,texto:"Centro administrativo da cidade.",img:["images/camara1.jpg"]},
{nome:"Castelo da Covilhã",lat:40.281571,lng:-7.508700,raio:200,texto:"Fortificação medieval.",img:["images/castelo1.jpg"]},
{nome:"Parque do Pião",lat:40.286934,lng:-7.572881,raio:300,texto:"Zona natural de lazer.",img:["images/piao1.jpg"]},
{nome:"Penhas da Saúde",lat:40.306437,lng:-7.546787,raio:800,texto:"Zona turística de montanha.",img:["images/penhas1.jpg"]},
{nome:"Edifício do Teleférico - Piornos",lat:40.315436,lng:-7.574326,raio:600,texto:"Base histórica do teleférico.",img:["images/teleferico.jpg"]},
{nome:"Nossa Senhora da Boa Estrela",lat:40.322614,lng:-7.602865,raio:600,texto:"Imagem religiosa esculpida na rocha.",img:["images/boaestrela.jpg"]},
{nome:"Lagoa do Viriato",lat:40.314228,lng:-7.559118,raio:600,texto:"Lago natural da Serra.",img:["images/viriato.jpg"]},
{nome:"Miradouro do Vale de Loriga",lat:40.334111,lng:-7.617704,raio:800,texto:"Vista panorâmica do vale glaciar.",img:["images/loriga.jpg"]},
{nome:"Estância de Ski Serra da Estrela",lat:40.330884,lng:-7.613242,raio:800,texto:"Principal centro de desportos de inverno.",img:["images/ski.jpg"]},
{nome:"Vale do Zêzere",lat:40.327905,lng:-7.586759,raio:800,texto:"Grande vale glaciar.",img:["images/zezere1.jpg"]},
{nome:"Torre Serra da Estrela",lat:40.279987,lng:-7.506133,raio:800,texto:"Ponto mais alto de Portugal.",img:["images/torre1.jpg"]},
{nome:"Cascata do Poço do Inferno",lat:40.373680,lng:-7.517925,raio:800,texto:"Cascata natural emblemática.",img:["images/pocoinferno.jpg"]}

];

function iniciar(){

document.getElementById("status").innerText="GPS ativo";

navigator.geolocation.watchPosition(pos=>{

let lat=pos.coords.latitude;
let lng=pos.coords.longitude;

if(pontoAtual==-1){
let menor=999999;
pontos.forEach((p,i)=>{
let d=dist(lat,lng,p.lat,p.lng);
if(d<menor){
menor=d;
pontoAtual=i;
}
});
mostrar(pontos[pontoAtual]);
return;
}

let p=pontos[pontoAtual];
let d=dist(lat,lng,p.lat,p.lng);

if(d<p.raio){
mostrar(p);
pontoAtual++;
}

},{enableHighAccuracy:true});

}

function mostrar(p){
document.getElementById("nome").innerText=p.nome;
document.getElementById("texto").innerText=p.texto;

let html="";
p.img.forEach(i=>{
html+=`<img src="${i}">`;
});
document.getElementById("imgs").innerHTML=html;
}

function dist(lat1,lng1,lat2,lng2){
let R=6371000;
let dLat=(lat2-lat1)*Math.PI/180;
let dLng=(lng2-lng1)*Math.PI/180;
let a=Math.sin(dLat/2)*Math.sin(dLat/2)+
Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*
Math.sin(dLng/2)*Math.sin(dLng/2);
let c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));
return R*c;
}

</script>
</body>
</html>


