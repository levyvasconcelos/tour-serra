<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Tour Interativo Covilhã e Serra</title>

<style>
body{font-family:Arial;text-align:center;padding:20px}
img{width:90%;max-width:400px;margin:5px}
button{padding:15px 30px;font-size:18px}
</style>
</head>

<body>

<h2>Tour Interativo Covilhã e Serra</h2>

<button onclick="iniciar()">INICIAR TOUR</button>

<p id="status"></p>
<h3 id="local"></h3>
<p id="texto"></p>
<div id="fotos"></div>

<script>

const pontos=[

{nome:"Central de Camionagem",lat:40.2735,lng:-7.4983,raio:250,texto:"Principal terminal rodoviário da cidade.",img:["images/camionagem1.jpg"]},

{nome:"Serra Shopping",lat:40.2710,lng:-7.5023,raio:250,texto:"Maior centro comercial da Covilhã.",img:["images/shopping1.jpg"]},

{nome:"Hotel Santa Eufémia",lat:40.2734,lng:-7.5031,raio:250,texto:"Hotel tradicional da cidade.",img:["images/hotel1.jpg"]},

{nome:"Rotunda do Rato",lat:40.2771,lng:-7.5105,raio:200,texto:"Importante ponto de circulação urbana.",img:["images/rato1.jpg"]},

{nome:"Museu do Lanifício",lat:40.2779,lng:-7.5085,raio:200,texto:"Museu histórico da indústria têxtil.",img:["images/lanificio1.jpg"]},

{nome:"Câmara Municipal",lat:40.2805,lng:-7.5044,raio:200,texto:"Centro administrativo da cidade.",img:["images/camara1.jpg"]},

{nome:"Castelo da Covilhã",lat:40.2817,lng:-7.5086,raio:200,texto:"Fortificação medieval.",img:["images/castelo1.jpg"]},

{nome:"Parque do Pião",lat:40.2872,lng:-7.5271,raio:300,texto:"Zona natural de lazer.",img:["images/piao1.jpg"]},

{nome:"Penhas da Saúde",lat:40.3076,lng:-7.5486,raio:800,texto:"Zona turística de montanha.",img:["images/penhas1.jpg"]},

{nome:"Vale do Zêzere",lat:40.3280,lng:-7.5867,raio:800,texto:"Grande vale glaciar.",img:["images/zezere1.jpg"]},

{nome:"Lagoa Comprida",lat:40.3415,lng:-7.6128,raio:800,texto:"Lago glaciar.",img:["images/lagoa1.jpg"]},

{nome:"Torre Serra da Estrela",lat:40.3219,lng:-7.6127,raio:800,texto:"Ponto mais alto de Portugal.",img:["images/torre1.jpg"]}

];

function iniciar(){

document.getElementById("status").innerHTML="Aguardando GPS...";

navigator.geolocation.watchPosition(pos=>{

document.getElementById("status").innerHTML="GPS ativo";

let lat=pos.coords.latitude;
let lng=pos.coords.longitude;

pontos.forEach(p=>{
let d=dist(lat,lng,p.lat,p.lng);
if(d<p.raio){mostrar(p);}
});

},
err=>{alert("Autorize a localização");},
{enableHighAccuracy:true});

}

function mostrar(p){
document.getElementById("local").innerHTML=p.nome;
document.getElementById("texto").innerHTML=p.texto;

let f="";
p.img.forEach(i=>{f+=`<img src="${i}">`;});
document.getElementById("fotos").innerHTML=f;
}

function dist(lat1,lon1,lat2,lon2){
let R=6371000;
let dLat=(lat2-lat1)*Math.PI/180;
let dLon=(lon2-lon1)*Math.PI/180;
let a=Math.sin(dLat/2)*Math.sin(dLat/2)+
Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*
Math.sin(dLon/2)*Math.sin(dLon/2);
return R*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)));
}

</script>

</body>
</html>

